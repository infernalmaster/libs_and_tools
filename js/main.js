(function(){var myApp;myApp=angular.module("ithings",["ngRoute","firebase"]),myApp.value("fbURL","https://interesting-things.firebaseio.com"),myApp.factory("Auth",function(fbURL,$firebaseAuth){return $firebaseAuth(new Firebase(fbURL))}),myApp.factory("Things",function($firebase,fbURL){return $firebase(new Firebase(""+fbURL+"/things/"))}),myApp.config(function($routeProvider){return $routeProvider.when("/",{controller:"ListCtrl",templateUrl:"list.html"}).when("/edit/:thingId",{controller:"EditCtrl",templateUrl:"detail.html"}).when("/new",{controller:"CreateCtrl",templateUrl:"detail.html"}).otherwise({redirectTo:"/"})}),myApp.controller("ListCtrl",function($scope,Things,Auth){return $scope.things=Things.$asArray(),$scope.auth=Auth,$scope.auth.$onAuth(function(){return $scope.$evalAsync(function(){return $scope.user=$scope.auth.$getAuth()})})}),myApp.controller("CreateCtrl",function($scope,$location,Things){return $scope.save=function(){return Things.$asArray().$add($scope.thing).then(function(){return $location.path("/")})}}),myApp.controller("EditCtrl",function($scope,$location,$routeParams,Things){var things;return things=Things.$asArray(),things.$loaded().then(function(){return $scope.thing=things.$getRecord($routeParams.thingId)}),$scope.destroy=function(){return things.$remove($scope.thing).then(function(){return $location.path("/")})},$scope.save=function(){return things.$save($scope.thing).then(function(){return $location.path("/")})}})}).call(this);